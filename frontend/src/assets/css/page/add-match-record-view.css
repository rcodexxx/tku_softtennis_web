/*
  ========================================
  1. 通用頁面與區塊樣式 (General Page & Section Styles)
  ========================================
  */

  /* 頁面容器 */
  .record-match-page {
    background: #f5f5f5; /* 淺灰色背景 */
    min-height: 100vh; /* 最小高度為視窗高度，確保內容足夠時佔滿頁面 */
  }

  /* 表單卡片容器 */
  .form-card {
    background: rgba(255, 255, 255, 0.98); /* 近乎白色，半透明 */
    backdrop-filter: blur(15px); /* 背景模糊效果 */
    border-radius: 16px; /* 圓角 */
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08); /* 陰影效果 */
    padding: 2rem; /* 內邊距 */
    border: 1px solid #e9ecef; /* 邊框 */
  }

  /* 頁面標題區塊 */
  .page-header {
    display: flex; /* Flex 佈局 */
    align-items: center; /* 垂直居中對齊 */
    margin-bottom: 2rem; /* 下外邊距 */
    padding: 1rem 0; /* 上下內邊距 */
    border-bottom: 1px solid #e9ecef; /* 底部邊框線 */
  }

  /* 頁面標題文字 */
  .page-title {
    margin: 0; /* 移除預設外邊距 */
    color: #2c3e50; /* 深藍灰色 */
    font-size: 1.8rem; /* 字體大小 */
    font-weight: 600; /* 字體粗細 */
    /* 漸變文字效果 */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text; /* 裁剪背景為文字形狀 */
    -webkit-text-fill-color: transparent; /* 文字顏色透明，顯示背景 */
    background-clip: text;
  }

  /* 進階設定容器 */
  .advanced-settings-container {
    position: relative; /* 相對定位，為 ::before 偽元素定位 */
    overflow: hidden; /* 隱藏溢出內容 */
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); /* 淺色漸變背景 */
    border-radius: 16px; /* 圓角 */
    padding: 2rem; /* 內邊距 */
    margin-top: 1rem; /* 上外邊距 */
    border: 1px solid #dee2e6; /* 邊框 */
  }

  /* 進階設定容器頂部裝飾線 */
  .advanced-settings-container::before {
    content: ''; /* 必須有內容才能顯示 */
    position: absolute; /* 絕對定位 */
    top: 0; /* 位於頂部 */
    left: 0;
    right: 0;
    height: 4px; /* 高度 */
    background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%); /* 漸變色 */
  }

  /* 設定區塊 (例如：場地信息) */
  .settings-section {
    position: relative; /* 為了 backdrop-filter 在某些情況下的渲染 */
    z-index: 1; /* 確保在 ::before 之上 */
    background: rgba(255, 255, 255, 0.7); /* 半透明白色背景 */
    border-radius: 12px; /* 圓角 */
    border: 1px solid rgba(255, 255, 255, 0.3); /* 半透明邊框 */
    backdrop-filter: blur(10px); /* 背景模糊 */
    padding: 1rem; /* 內邊距 */
    margin-bottom: 1.5rem; /* 下外邊距 */
    transition: all 0.3s ease; /* 所有屬性平滑過渡 */
  }

  .settings-section:hover {
    background: rgba(255, 255, 255, 0.9); /* hover 時背景更實 */
    transform: translateY(-2px); /* 向上微移 */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* 較大陰影 */
  }

  .settings-section:last-child {
    margin-bottom: 0; /* 最後一個不加下外邊距 */
  }

  /*
  ========================================
  2. 控制面板與狀態提示 (Control Panel & Status Alerts)
  ========================================
  */

  /* 控制面板 (例如：發球方、顯示模式選擇) */
  .control-panel {
    display: grid; /* Grid 佈局 */
    grid-template-columns: 1fr 1fr; /* 兩列等寬 */
    gap: 16px; /* 網格間距 */
    margin-bottom: 1rem; /* 下外邊距 */
    padding: 1rem; /* 內邊距 */
    background: rgba(0, 0, 0, 0.02); /* 輕微透明黑色背景 */
    border-radius: 8px; /* 圓角 */
  }

  /* 發球選擇器和顯示模式選擇器 */
  .serve-selector,
  .display-mode-selector {
    display: flex; /* Flex 佈局 */
    flex-direction: column; /* 垂直排列 */
  }

  /* 比賽狀態提示框 */
  .match-status-alert {
    margin: 1rem 0; /* 上下外邊距 */
  }

  /* 比賽完成提示框 */
  .completion-alert {
    border: 2px solid #52c41a; /* 綠色邊框 */
    background: linear-gradient(135deg, #f6ffed 0%, #e6f7ff 100%); /* 淺綠到淺藍漸變背景 */
  }

  /*
  ========================================
  3. 詳細比分區塊樣式 (Detailed Score Section Styles)
  ========================================
  */

  /* 詳細比分區塊容器 */
  .detailed-score-section {
    margin-top: 1.5rem; /* 上外邊距 */
  }

  /* 比分區塊標題 */
  .score-section-header {
    display: flex; /* Flex 佈局 */
    align-items: center; /* 垂直居中 */
    gap: 8px; /* 元素間距 */
    color: #666; /* 灰色字體 */
    font-size: 14px; /* 字體大小 */
    flex-wrap: wrap; /* 允許換行 */
  }

  /* 比分標題文字 */
  .score-title {
    font-weight: 600; /* 字體粗細 */
    color: #2c3e50; /* 深藍灰色 */
  }

  /* 局數標籤 */
  .games-tag {
    margin-left: 8px; /* 左外邊距 */
  }

  /* 比分模式切換按鈕容器 */
  .score-toggle-container {
    text-align: center; /* 內容居中 */
    margin: 1rem 0; /* 上下外邊距 */
  }

  /* 切換詳細比分按鈕 */
  .toggle-detailed-btn {
    font-size: 0.9rem; /* 字體大小 */
    padding: 8px 16px; /* 內邊距 */
    border-radius: 8px; /* 圓角 */
    transition: all 0.3s ease; /* 平滑過渡 */
  }

  /* 比分相關提示框 */
  .score-alert {
    margin: 1rem 0; /* 上下外邊距 */
  }

  /* 詳細比分內容區塊 */
  .detailed-score-content {
    margin-top: 1rem; /* 上外邊距 */
  }

  /*
  ========================================
  4. 表格模式比分樣式 (Table Mode Score Styles)
  ========================================
  */

  /* 表格模式容器 */
  .score-table-mode {
    margin: 1rem 0; /* 上下外邊距 */
  }

  /* 比分表格 */
  .score-table {
    background: white; /* 白色背景 */
    border-radius: 8px; /* 圓角 */
    overflow: hidden; /* 隱藏溢出內容 */
    border: 1px solid #e8e8e8; /* 邊框 */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02); /* 輕微陰影 */
  }

  /* 表格頭部樣式 (穿透 Naive UI 組件) */
  .score-table :deep(.n-table th) {
    padding: 12px 8px; /* 內邊距 */
  }

  /* 表格單元格樣式 (穿透 Naive UI 組件) */
  .score-table :deep(.n-table td) {
    position: relative; /* 為內部絕對定位元素準備 */
    padding-left: 30px; /* 為發球圖標預留空間 */
    padding-right: 8px; /* 右內邊距 */
  }

  /* 表格行 hover 效果 (穿透 Naive UI 組件) */
  .score-table :deep(.n-table tr:hover td) {
    background: rgba(102, 126, 234, 0.02); /* 輕微藍色背景 */
  }

  /* 已完成局的表格行樣式 (穿透 Naive UI 組件) */
  .score-table :deep(.completed-row td) {
    background: linear-gradient(135deg, #f6ffed 0%, #f0f9ff 100%); /* 淺綠到淺藍漸變背景 */
  }

  /* 已完成局 hover 時背景不變 (穿透 Naive UI 組件) */
  .score-table :deep(.completed-row:hover td) {
    background: linear-gradient(135deg, #f6ffed 0%, #f0f9ff 100%) !important;
  }

  /* 表格模式發球圖標 */
  .table-serve-icon {
    position: absolute; /* 絕對定位 */
    left: 0; /* 位於左側 */
    top: 50%; /* 垂直居中 */
    transform: translateY(-50%); /* 精確垂直居中 */
    font-size: 1em; /* 字體大小 */
    z-index: 10; /* 確保在輸入框之上 */
  }

  /* 表格模式輸入框容器 */
  .score-input-container {
    display: flex; /* Flex 佈局 */
    align-items: center; /* 垂直居中 */
    justify-content: center; /* 水平居中 */
    gap: 8px; /* 元素間距 */
    position: relative; /* 為內部絕對定位元素準備 */
  }

  /*
  ========================================
  5. 卡片模式比分樣式 (Card Mode Score Styles)
  ========================================
  */

  /* 卡片模式容器 */
  .score-cards-mode {
    margin: 1rem 0; /* 上下外邊距 */
  }

  /* 單局比分卡片 */
  .game-score-card {
    border: 1px solid #e8e8e8; /* 邊框 */
    border-radius: 8px; /* 圓角 */
    height: 100%; /* 確保高度一致 */
    transition: all 0.3s ease; /* 平滑過渡 */
  }

  .game-score-card:hover {
    border-color: #667eea; /* hover 時邊框變藍 */
    transform: translateY(-2px); /* 向上微移 */
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15); /* 輕微藍色陰影 */
  }

  /* 已完成局的卡片樣式 */
  .completed-card {
    border-color: #52c41a; /* 綠色邊框 */
    background: linear-gradient(135deg, #f6ffed 0%, #f0f9ff 100%); /* 淺綠到淺藍漸變背景 */
  }

  /* 卡片頭部 (局數和操作按鈕) */
  .card-game-header {
    display: flex; /* Flex 佈局 */
    justify-content: space-between; /* 兩端對齊 */
    align-items: center; /* 垂直居中 */
    width: 100%; /* 佔滿寬度 */
    font-weight: 500; /* 字體粗細 */
    font-size: 0.9rem; /* 字體大小 */
  }

  /* 卡片狀態顯示區域 */
  .card-status {
    display: flex; /* Flex 佈局 */
    align-items: center; /* 垂直居中 */
    gap: 4px; /* 元素間距 */
  }

  /* 卡片操作區 */
  .card-actions {
    margin-top: 8px; /* 上外邊距 */
    padding-top: 8px; /* 上內邊距 */
    border-top: 1px solid #f0f0f0; /* 頂部邊框線 */
  }

  /* 卡片模式發球圖標 */
  .card-serve-icon {
    font-size: 1em; /* 字體大小 */
  }

  /* 卡片標題區塊 (包含局數和 Tiebreak 標籤) */
  .card-title-section {
    display: flex; /* Flex 佈局 */
    flex-direction: column; /* 垂直排列 */
    align-items: flex-start; /* 左對齊 */
    gap: 4px; /* 元素間距 */
  }

  /*
  ========================================
  6. 禁用與無效狀態 (Disabled & Invalid States)
  ========================================
  */

  /* 禁用狀態的表格行 (穿透 Naive UI 組件) */
  .score-table :deep(.disabled-row td) {
    background: #f5f5f5 !important; /* 淺灰色背景 */
    opacity: 0.6; /* 半透明 */
    cursor: not-allowed; /* 禁用鼠標樣式 */
  }

  /* 禁用狀態的表格行 hover 時背景不變 (穿透 Naive UI 組件) */
  .score-table :deep(.disabled-row:hover td) {
    background: #f5f5f5 !important;
  }

  /* 禁用狀態的卡片 */
  .disabled-card {
    opacity: 0.6; /* 半透明 */
    background: #f5f5f5 !important; /* 淺灰色背景 */
    cursor: not-allowed; /* 禁用鼠標樣式 */
  }

  /* 禁用狀態的卡片 hover 時效果移除 */
  .disabled-card:hover {
    transform: none !important; /* 移除位移 */
    box-shadow: none !important; /* 移除陰影 */
    border-color: #e8e8e8 !important; /* 邊框顏色不變 */
  }

  /* 無效分數的表格行 (穿透 Naive UI 組件) */
  .score-table :deep(.invalid-row td) {
    background: linear-gradient(135deg, #fff2f0 0%, #ffccc7 100%) !important; /* 淺紅到粉紅漸變背景 */
    border: 1px solid #ff7875; /* 紅色邊框 */
  }

  /* 無效分數的卡片 */
  .invalid-card {
    background: linear-gradient(135deg, #fff2f0 0%, #ffccc7 100%) !important; /* 淺紅到粉紅漸變背景 */
    border: 2px solid #ff7875 !important; /* 紅色邊框 */
  }

  /* 錯誤狀態的輸入框樣式 (穿透 Naive UI 組件) */
  .score-table :deep(.n-input-number.n-input-number--error) {
    border-color: #ff4d4f; /* 紅色邊框 */
  }

  /* 警告狀態的輸入框樣式 (穿透 Naive UI 組件) */
  .score-table :deep(.n-input-number.n-input-number--warning) {
    border-color: #faad14; /* 黃色邊框 */
  }

  /*
  ========================================
  7. 比賽狀態樣式 (Match State Styles)
  ========================================
  */

  /* 平分狀態卡片 */
  .deuce-card {
    background: linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%) !important; /* 淺藍到深藍漸變背景 */
    border: 2px solid #1890ff !important; /* 藍色邊框 */
    animation: deuce-pulse 2s infinite; /* 脈衝動畫 */
  }

  /* 平分脈衝動畫 */
  @keyframes deuce-pulse {
    0%,
    100% {
      box-shadow: 0 0 0 0 rgba(24, 144, 255, 0.4); /* 初始陰影透明 */
    }
    50% {
      box-shadow: 0 0 0 8px rgba(24, 144, 255, 0); /* 陰影擴散並消失 */
    }
  }

  /* 領先狀態卡片 */
  .advantage-card {
    background: linear-gradient(135deg, #fff7e6 0%, #ffd591 100%) !important; /* 淺黃到橘黃漸變背景 */
    border: 2px solid #fa8c16 !important; /* 橘色邊框 */
  }

  /* 獲勝狀態統計項 */
  .stat-item.winner {
    background: linear-gradient(135deg, #f6ffed 0%, #e6f7ff 100%); /* 淺綠到淺藍漸變背景 */
    border: 2px solid #52c41a; /* 綠色邊框 */
    animation: pulse 2s infinite; /* 獲勝脈衝動畫 */
  }

  /* 獲勝脈衝動畫 */
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(82, 196, 26, 0.4); /* 初始陰影透明 */
    }
    70% {
      box-shadow: 0 0 0 10px rgba(82, 196, 26, 0); /* 陰影擴散並消失 */
    }
    100% {
      box-shadow: 0 0 0 0 rgba(82, 196, 26, 0);
    }
  }

  /* 遊戲狀態顯示區域 (例如：進行中、A勝、B勝) */
  .game-status-display {
    display: flex; /* Flex 佈局 */
    justify-content: center; /* 水平居中 */
    align-items: center; /* 垂直居中 */
    min-height: 24px; /* 最小高度 */
    flex-wrap: wrap; /* 允許換行 */
    gap: 4px; /* 元素間距 */
  }

  /*
  ========================================
  8. 即時統計樣式 (Real-Time Statistics Styles)
  ========================================
  */

  /* 即時統計區塊 */
  .real-time-statistics {
    margin-top: 1.5rem; /* 上外邊距 */
  }

  /* 統計匯總網格 */
  .stats-summary {
    gap: 8px; /* 網格間距 */
  }

  /* 統計單項卡片 */
  .stat-item {
    text-align: center; /* 文字居中 */
    padding: 12px 8px; /* 內邊距 */
    background: rgba(255, 255, 255, 0.8); /* 半透明白色背景 */
    border-radius: 8px; /* 圓角 */
    border: 1px solid rgba(0, 0, 0, 0.06); /* 輕微邊框 */
    transition: all 0.2s ease; /* 平滑過渡 */
  }

  .stat-item:hover {
    background: rgba(255, 255, 255, 1); /* hover 時背景更實 */
    transform: translateY(-1px); /* 向上微移 */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 較大陰影 */
  }

  /* 先發球統計項 */
  .serve-stat {
    background: linear-gradient(135deg, #fff7e6 0%, #fff2cc 100%) !important; /* 淺黃色漸變背景 */
    border: 1px solid #ffd591 !important; /* 黃色邊框 */
  }

  /* 先發球統計值 (穿透 Naive UI 組件) */
  .serve-stat :deep(.n-statistic-value) {
    color: #fa8c16 !important; /* 橘色字體 */
    font-weight: 700 !important; /* 字體加粗 */
  }

  /*
  ========================================
  9. 發球與 Tiebreak 相關樣式 (Serve & Tiebreak Specific Styles)
  ========================================
  */

  /* 球隊標題 (包含發球圖標) */
  .team-header,
  .team-label {
    display: flex; /* Flex 佈局 */
    align-items: center; /* 垂直居中 */
    gap: 6px; /* 元素間距 */
    justify-content: center; /* 水平居中 */
  }

  /* 發球圖標動畫 */
  .serve-icon {
    font-size: 1.1em; /* 字體大小 */
    animation: tennis-bounce 2s ease-in-out infinite; /* 網球彈跳動畫 */
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)); /* 輕微陰影，讓圖標更突出 */
  }

  /* 網球彈跳動畫 */
  @keyframes tennis-bounce {
    0%,
    100% {
      transform: translateY(0); /* 初始和結束位置 */
    }
    50% {
      transform: translateY(-3px); /* 向上彈跳 */
    }
  }

  /* 發球輪換說明區塊 */
  .serve-rotation-info {
    margin-top: 1rem; /* 上外邊距 */
  }

  /* 發球信息內容 */
  .serve-info-content {
    display: flex; /* Flex 佈局 */
    flex-direction: column; /* 垂直排列 */
    gap: 4px; /* 元素間距 */
    font-size: 0.9rem; /* 字體大小 */
  }

  /* Tiebreak 行樣式 (表格模式) */
  .tiebreak-row {
    background: linear-gradient(135deg, #fff7e6 0%, #ffecc7 100%) !important; /* 淺黃色漸變背景 */
    border-left: 4px solid #fa8c16 !important; /* 左側橘色粗邊框 */
  }

  /* Tiebreak 卡片樣式 (卡片模式) */
  .tiebreak-card {
    background: linear-gradient(135deg, #fff7e6 0%, #ffecc7 100%) !important; /* 淺黃色漸變背景 */
    border: 2px solid #fa8c16 !important; /* 橘色邊框 */
    box-shadow: 0 4px 12px rgba(250, 140, 22, 0.15); /* 橘色陰影 */
  }

  .tiebreak-card:hover {
    transform: translateY(-3px); /* 向上微移 */
    box-shadow: 0 8px 20px rgba(250, 140, 22, 0.25); /* 更明顯的陰影 */
  }

  /* Tiebreak 卡片在平分時的特殊動畫 */
  .tiebreak-card.deuce-card {
    animation: tiebreak-pulse 3s infinite; /* Tiebreak 平分脈衝動畫 */
  }

  /* Tiebreak 平分脈衝動畫 */
  @keyframes tiebreak-pulse {
    0%,
    100% {
      box-shadow: 0 0 0 0 rgba(250, 140, 22, 0.4); /* 初始陰影透明 */
      border-color: #fa8c16; /* 初始邊框顏色 */
    }
    50% {
      box-shadow: 0 0 0 10px rgba(250, 140, 22, 0); /* 陰影擴散並消失 */
      border-color: #ff7875; /* 邊框顏色變化 */
    }
  }

  /* 局數單元格 (表格模式，包含 Tiebreak 標籤) */
  .game-number-cell {
    display: flex; /* Flex 佈局 */
    flex-direction: column; /* 垂直排列 */
    align-items: center; /* 水平居中 */
    gap: 4px; /* 元素間距 */
  }

  /* Tiebreak 標籤 */
  .tiebreak-badge {
    margin-top: 2px; /* 上外邊距 */
  }


  /*
  ========================================
  10. 響應式調整 (Responsive Adjustments)
  ========================================
  */

  /* 螢幕寬度小於 768px */
  @media (max-width: 768px) {
    /* 頁面標題區塊 */
    .page-header {
      flex-direction: column; /* 垂直排列 */
      align-items: flex-start; /* 左對齊 */
      gap: 1rem; /* 元素間距 */
    }

    /* 頁面標題文字 */
    .page-title {
      font-size: 1.5rem; /* 字體縮小 */
    }

    /* 進階設定容器 */
    .advanced-settings-container {
      padding: 1rem; /* 內邊距縮小 */
    }

    /* 控制面板 */
    .control-panel {
      grid-template-columns: 1fr; /* 單列佈局 */
      gap: 12px; /* 網格間距縮小 */
      padding: 0.75rem; /* 內邊距縮小 */
    }

    /* 統計匯總網格 (6列調整為3列) */
    .stats-summary {
      grid-template-columns: repeat(3, 1fr) !important; /* 三列等寬 */
      gap: 6px; /* 網格間距縮小 */
    }

    /* 統計匯總的第五項 (例如：總活躍局數)，在小螢幕上獨佔一行 */
    .stats-summary .stat-item:nth-child(5) {
      grid-column: 1 / -1; /* 從第一列到最後一列，佔滿整行 */
    }

    /* 比分區塊標題 */
    .score-section-header {
      flex-direction: column; /* 垂直排列 */
      align-items: flex-start; /* 左對齊 */
      gap: 4px; /* 元素間距縮小 */
    }

    /* 表格模式下表頭和單元格內邊距和字體大小調整 */
    .score-table :deep(th),
    .score-table :deep(td) {
      padding: 8px 4px; /* 內邊距縮小 */
      font-size: 0.85rem; /* 字體縮小 */
    }

    /* 球隊標題 (包含發球圖標) */
    .team-header {
      flex-direction: column; /* 垂直排列 */
      gap: 2px; /* 元素間距縮小 */
      font-size: 0.85rem; /* 字體縮小 */
    }

    /* 發球圖標 */
    .serve-icon {
      font-size: 1em; /* 字體大小調整 */
    }

    /* 局數單元格 */
    .game-number-cell {
      font-size: 0.8rem; /* 字體縮小 */
    }

    /* 卡片標題區塊 */
    .card-title-section {
      font-size: 0.8rem; /* 字體縮小 */
    }
  }

  /* 螢幕寬度小於 576px */
  @media (max-width: 576px) {
    /* 控制面板 */
    .control-panel {
      grid-template-columns: 1fr; /* 單列佈局 */
      padding: 0.5rem; /* 內邊距進一步縮小 */
    }

    /* 發球選擇器和顯示模式選擇器內的表單項 */
    .serve-selector :deep(.n-form-item),
    .display-mode-selector :deep(.n-form-item) {
      margin-bottom: 0; /* 移除下外邊距 */
    }

    /* 統計匯總網格 (小螢幕調整為2列) */
    .stats-summary {
      grid-template-columns: repeat(2, 1fr) !important; /* 兩列等寬 */
    }

    /* 卡片模式下的網格佈局 (穿透 Naive UI 組件) */
    .score-cards-mode :deep(.n-grid) {
      grid-template-columns: repeat(2, 1fr) !important; /* 兩列等寬 */
    }

    /* 卡片頭部 */
    .card-game-header {
      font-size: 0.8rem; /* 字體進一步縮小 */
    }

    /* 切換詳細比分按鈕 */
    .toggle-detailed-btn {
      font-size: 0.8rem; /* 字體進一步縮小 */
      padding: 6px 12px; /* 內邊距進一步縮小 */
    }

    /* 球隊標題和標籤 */
    .team-header,
    .team-label {
      gap: 3px; /* 元素間距進一步縮小 */
    }

    /* 局數單元格的粗體文字 */
    .game-number-cell strong {
      font-size: 0.75rem; /* 字體進一步縮小 */
    }
  }